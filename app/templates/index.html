{% extends "base.html" %}

{% block content %}
	<div class"row">
		<div class="col-md-6">
			<div class="form-group">
	 			<label for="sel1">Filter by workshop:</label>
	  			<select class="form-control" id="sel1" onchange="location.href='/view/' + this.options[this.selectedIndex].value;">
	  				<option>Select Workshop</option>
	    			{% for workshop in workshops%}
	    				<option value="{{workshop}}">{{workshop}}</option>
	    			{% endfor %}
	  			</select>
			</div>
		</div>
		<div class="col-md-6">
			<br />
			{%if not show_all%}
			<a href="/view/" class="btn btn-primary">Show for all workshops</a>
			{% endif %}
		</div>
	</div>
	<div class="row col-md-12">
		<H2 class="text-center">{{workshop_name}}</H2>
	</div>
	<!-- Different OS USERS -->
	<!-- ===================================================================== -->
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
	         			<div class="panel-heading panel-heading-custom">
	            				<h3 class="panel-title">Number of different OS users</h3>
	         			</div>
	         			<div class="panel-body">
	            				<div id="os_user" style="height: 400px"></div>
	         			</div>
	     			</div>
	 			</div>
	</div>
	<!-- ===================================================================== -->

	<!-- MOST failed packages -->
	<!-- ===================================================================== -->
	<div class="row">
		<div class="col-md-12">
			<div class="panel panel-default">
          			<div class="panel-heading panel-heading-custom">
             				<h3 class="panel-title">Most Failed Packages</h3>
          			</div>
          			<div class="panel-body">
             				<div id="failed_package"></div>
             				<div class="form-group">
	 			<label for="sel1">More details :</label>
	  			<form action="/view/detail/" method="GET">
		  			<select class="form-control" id="sel1" name="package_detail">
		  				<option>Select Package</option>
		    			{% for failed_package in response['most_failed_packages'] %}
				    		<option value="{{failed_package['name']}}|{{failed_package['version']}}">{{failed_package['name']}} ({{failed_package['version']}})</option>
				    			{% endfor %}
				  	</select>
					<div class="checkbox">
		  				{% if not show_all%}																				  			  		<label><input type="checkbox" name="all_workshops" value="True">All workshops</label>
				  		{% else %}
				  	  		<input type="hidden" value="True" name="all_workshops">
					  	{% endif %}
				  	</div>
					{% if not show_all %}
		  				<input type="hidden" value="{{workshop_name}}" name="workshop_name">
		  			{% endif %}

					<input type="submit" class="btn btn-primary" />
		  		</form>
		  	</div>
  		</div>
  	</div>

	<script type="text/javascript">
		func_os_user({{ response['os_users']|tojson}});
		func_failed_installs({{ response['most_failed_packages']|tojson}});
	</script>
{% endblock %}